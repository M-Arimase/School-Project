### 数据结构与算法 第三章栈与队列习题 
***
#### 3.1 
> 请利用两个栈S1和S2来模拟一个队列。已知栈的三个运算定义如下：PUSH(ST,x):元素x入ST栈；POP(ST,x)：ST栈顶元素出栈，赋给变量x；Sempty(ST)：判ST栈是否为空。那么如何利用栈的运算来实现该队列的三个运算：enqueue:插入一个元素入队列； dequeue:删除一个元素出队列；queue_empty：判队列为空。（请写明算法的思想及必要的注释）。

```C++

struct Queue{
	stack<int> S1, S2;

	void enqueue(int x) {
		PUSH(S1, x);
	}

	void dequeue(int& x) {
		if (Sempty(S2))
			while(!Sempty(S1)) {
				int y;
				POP(S1, y);
				PUSH(S2, y);
			}

		POP(S2, x);
	}

	bool queue_empty() {
		return Sempty(S1) && Sempty(S2);
	}
};
```
入队操作: 直接将元素添加到$S1$中。

出队操作: 分两种情况，若$S2$不为空，则从$S2$中弹出元素；否则将S1中元素依次添加到$S2$中，然后从$S2$中弹出元素。

队列为空当且仅当$S1$、$S2$都为空。

***
#### 3.2.(1)
> 编号为1,2,…,n的n辆火车顺序开进栈式结构的站台。禁止将车厢从缓冲铁轨移动至入轨，也禁止从出轨移动车厢至缓冲铁轨。请问开出车站的顺序有多少种可能？请写出你的推导过程。

定义答案为$F(n)$

考虑最后一个出栈的火车编号为$i$，则一定是编号为$1$到$i-1$的火车先入栈出栈，然后$i$入栈，然后是编号为$i+1$到$n$的火车先入栈出栈。

$F(n)=\sum_{i=1}^{n}F(i-1)*F(n-i)\quad$其中$F(0)=1$

卡特兰数：$F(n)=C(2n,n)-C(2n,n-1)$

#### 3.2.（2）
> 证明：从初始输入序列1，2，…，n，可以利用一个栈得到输出序列p1，p2，…，pn（p1，p2，…，pn是1， 2，…，n的一种排列）的充分必要条件是，不存在下标i，j，k，满足i<j<k 同时 Pj<Pk<Pi。

用数学归纳法证明更强的结论，命题$M(n)$为从初始输入序列$A_1,A_2,...,A_n$其中$A_1<A_2<...<A_n$，可以利用一个栈得到输出序列$P_1,P_2,...,P_n$（称为$R(n)$)的充分必要条件是，不存在下标$i,j,k$，满足$i<j<k$同时$P_j<P_k<P_i$(称为$S(n)$)。

假设当$n<N$时命题$M(n)$都是成立的，现在证明$M(N)$成立。

充分性：

由$S(N)$可以知道，不存在$1\le i<j<N$使得$P_j<P_N<P_i$，故存在$r$使得$1\le i<r\Rightarrow P_i<P_N, r\le i<N\Rightarrow P_i>P_N$，且分别满足$S(r-1)$和$S(n-r)$。

由$M(r-1)$和$M(n-r)$知：$A_1,...,A_{r-1}$可以得到$P_1,...,P_{r-1}$，然后$A_r$进栈成为栈中唯一的元素，然后$A_{r+1},...,A_n$可以得到$P_r,...,P_{n-1}$，最后$A_r$出栈即可成为$P_n$。

即$S(N)\Rightarrow R(N)$

必要性：

若$P_n=A_r$，则一定有$A_1,...,A_{r-1}$得到$P_1,...,P_{r-1}$，然后$A_r$进栈成为栈中唯一的元素，然后$A_{r+1},...,A_n$得到$P_r,...,P_{n-1}$，最后$A_r$出栈成为$P_n$。由$M(r-1)$和$M(n-r)$知：$P_1,...,P_{r-1}$满足$S(r-1)$且$P_r,...,P_{n-1}$满足$S(n-r)$。

由$1\le i<r\Rightarrow P_i<P_N, r\le i<N\Rightarrow P_i>P_N$知：当$i<r$且$k\ge r$时$P_k>P_i$，当$j\ge r$且$k=N$时$P_j>P_k$。

即$R(N)\Rightarrow S(N)$

故$M(N)$成立，$M(1)$显然成立，故对于任意的$n$有$M(n)$

